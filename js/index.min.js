try{var page1=(function(){var myChart=echarts.init(document.getElementById('main'));myChart.showLoading({text:''});var categories=['支出','收入'];function get_data(){var data;$.ajax({type:"post",async:false,url:"bar.json",contentType:"application/json",dataType:"json",success:function(result){if(result){data=result;}},error:function(errorMsg){console.log("数据加载失败");return false;}});return data;}
var json=get_data();var income=expenditure=null;function getJSON(x){var array=new Array();income=(x[0].income).toString();income=new Array(income);expenditure=(x[0].expenditure).toString();expenditure=new Array(expenditure);return income,expenditure;}
getJSON(json);option={tooltip:{trigger:''},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},magicType:{show:true,type:['line','bar']},restore:{show:true},saveAsImage:{show:true}}},calculable:true,legend:{data:categories,bottom:"0",right:"38"},xAxis:[{type:'category',data:['']}],yAxis:[{type:'value',name:'',min:0,interval:1000,axisLabel:{formatter:'{value}'}},{type:'value',name:'',min:0,interval:1000,axisLabel:{formatter:'{value}'}}],grid:{x:50},series:[{name:'支出',type:'bar',data:expenditure,barWidth:60,itemStyle:{normal:{color:function(params){var colorList=["#d86052"];return colorList[params.dataIndex]},label:{show:true}}}},{name:'收入',type:'bar',barWidth:60,data:income,itemStyle:{normal:{color:function(params){var colorList=["#6db988"];return colorList[params.dataIndex]},label:{show:true}}}}]};var totalExpenditure=document.getElementById("expenditure"),totalIncome=document.getElementById("income"),page1=document.getElementById("page1"),balance=page1.getElementsByClassName("balanceTextColor")[0];totalExpenditure.innerHTML="总支总计<br/>"+expenditure+".0";totalIncome.innerHTML="收入总计<br/>"+income+".0"
balance.innerHTML=income-expenditure+".0"
myChart.setOption(option);myChart.hideLoading();window.onresize=myChart.resize;})();}catch(e){console.log("Failed to load the page.");}
try{var page2=(function(){var myChart=echarts.init(document.getElementById('main2'));myChart.showLoading({text:''});function get_data(){var data;$.ajax({type:"post",async:false,url:"data.json",contentType:"application/json",dataType:"json",success:function(result){if(result){data=result;}},error:function(errorMsg){console.log("数据加载失败！");return false;}});return data;}
var json=get_data();function getJSON(x){var JSONObj=x;var str="";for(var i=0;i<JSONObj.length;i++){str+=JSONObj[i].name+",";}
categor=str.substring(0,str.length-1);categories=new Array();categories=categor.split(",");values=x;(function createEle(str){var statement=document.getElementById("statement");var tableTr="<tr class='tableHeader'>";tableTr+="<td>类别</td><td>金额</td><td>比例</td></tr>";var string="";var num=null;for(var i=0;i<str.length;i++){str[i].i=i;if(i<1){for(var j=0;j<str.length;j++){num+=str[j].value;}}
(function(i){var b=(str[i].value/num).toFixed(4),c=null;if(b!=1){c=b.slice(2,4)+"."+b.slice(4,6)+"%";}else{c=b*100+"%";}
string+="<tr><td>"+str[i].name+"</td><td>"+str[i].value+"</td><td>"+c+"</td></tr>";return string;})(i);}
tableTr+=string;statement.innerHTML=tableTr;})(values);return categories,values}
getJSON(json);var option={baseOption:{tooltip:{trigger:'item',formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:'vertical',top:"100",right:"30",textStyle:{fontSize:'18'},data:categories},series:[{name:'支出类别',type:'pie',radius:['50%','20%'],avoidLabelOverlap:false,label:{normal:{show:false,position:'center'},emphasis:{show:true,textStyle:{fontWeight:'bold'}}},labelLine:{normal:{show:false}},data:values}]},media:[{query:{minWidth:300,maxWidth:1024},option:{legend:{right:0,top:0,textStyle:{fontSize:'10'},data:categories,orient:'vertical'},series:[{name:'支出类别',type:'pie',radius:['84%','30%'],center:["48%","50%"],avoidLabelOverlap:false,label:{normal:{show:false},emphasis:{show:true,textStyle:{fontSize:'18',fontWeight:'bold'}}},labelLine:{normal:{show:false}},data:values}]}}]};myChart.setOption(option);myChart.hideLoading();window.onresize=myChart.resize;(function clickColor(){var statement=document.getElementById("statement");var trs=statement.getElementsByTagName("tr");if(trs.length>1){for(var i=1;i<trs.length;i++){trs[i].i=i;trs[i].onclick=function(){for(var j=1;j<trs.length;j++){trs[j].style.backgroundColor="";}
this.style.backgroundColor="#efe8ec";}}}})();})();}catch(e){console.log("Failed to load the page.");}
try{var page3=(function(){var myChart=echarts.init(document.getElementById('main3'));myChart.showLoading({text:''});function get_data(){var data;$.ajax({type:"post",async:false,url:"incomepie.json",contentType:"application/json",dataType:"json",success:function(result){if(result){data=result;}},error:function(errorMsg){console.log("数据加载失败！");return false;}});return data;}
var json=get_data();function getJSON(x){var vategories=values=null;var JSONObj=x;var str="";for(var i=0;i<JSONObj.length;i++){str+=JSONObj[i].name+",";};categor=str.substring(0,str.length-1);categories=new Array();categories=categor.split(",");values=x;(function createEle(str){var statement=document.getElementById("statement3");var tableTr="<tr class='tableHeader'>";tableTr+="<td>类别</td><td>金额</td><td>比例</td></tr>";var string="";var num=null;for(var i=0;i<str.length;i++){str[i].i=i;if(i<1){for(var j=0;j<str.length;j++){num+=str[j].value;}}
(function(i){var b=(str[i].value/num).toFixed(4),c=null;if(b!=1){c=b.slice(2,4)+"."+b.slice(4,6)+"%";}else{c=b*100+"%";}
string+="<tr><td>"+str[i].name+"</td><td>"+str[i].value+"</td><td>"+c+"</td></tr>";return string;})(i);}
tableTr+=string;statement.innerHTML=tableTr;})(values);return categories,values}
getJSON(json);var option={baseOption:{tooltip:{trigger:'item',formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:'vertical',top:"100",right:"30",textStyle:{fontSize:'18'},data:categories},series:[{name:'收入类别',type:'pie',radius:['50%','20%'],avoidLabelOverlap:false,label:{normal:{show:false,position:'center'},emphasis:{show:true,textStyle:{fontWeight:'bold'}}},labelLine:{normal:{show:false}},data:values}]},media:[{query:{minWidth:300,maxWidth:1024},option:{legend:{right:0,top:0,textStyle:{fontSize:'10'},data:categories,orient:'vertical'},series:[{name:'收入类别',type:'pie',radius:['84%','30%'],center:["48%","50%"],avoidLabelOverlap:false,label:{normal:{show:false},emphasis:{show:true,textStyle:{fontSize:'18',fontWeight:'bold'}}},labelLine:{normal:{show:false}},data:values}]}}]};myChart.setOption(option);myChart.hideLoading();window.onresize=myChart.resize;(function clickColor(){var statement=document.getElementById("statement3");var trs=statement.getElementsByTagName("tr");if(trs.length>1){for(var i=1;i<trs.length;i++){trs[i].i=i;trs[i].onclick=function(){for(var j=1;j<trs.length;j++){trs[j].style.backgroundColor="";}
this.style.backgroundColor="#efe8ec";}}}})();})();}catch(e){console.log("Failed to load the page.");}